function removeTags(str){return null!==str&&""!==str&&(str=str.toString()).replace(/(<([^>]+)>)/gi,"")}function get_places(doc,ot){doc.places()&&(doc.places().unique().map((function(item,index){ot=ot.replace(item.text(),`<span style="background-color:#0dcaf0;color:#000; border:2px #0dcaf0 solid;">Place</span><span style="color:#fff;border:2px #0dcaf0 solid;">${item.text()}</span>`)})),get_people(doc,ot))}function get_only_places(doc){if(doc.places()){arr=doc.places().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpplaces").html(`${JSON.stringify(result,null,"\t")}`)}}function get_people(doc,ot){doc.people()&&(doc.people().unique().map((function(item,index){ot=ot.replace(item.text(),`<span style="background-color:#ffc107;color:#000; border:2px #ffc107 solid;">Name</span><span style="color:#fff;border:2px #ffc107 solid;">${item.text()}</span>`)})),get_orgs(doc,ot))}function get_only_people(doc){if(doc.people()){arr=doc.people().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpnames").html(`${JSON.stringify(result,null,"\t")}`)}}function get_orgs(doc,ot){doc.organizations()&&(doc.organizations().unique().map((function(item,index){ot=ot.replace(item.text(),`<span style="background-color:#dc3545;color:#000; border:2px #dc3545 solid;">Org</span><span style="color:#fff;border:2px #dc3545 solid;">${item.text()}</span>`)})),$("#pextract").html(`${ot}<br>`),$("#nlpdetails").html(JSON.stringify(nerresults,null,2)))}function get_only_orgs(doc){if(doc.organizations()){arr=doc.organizations().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpOrganizations").html(`${JSON.stringify(result,null,"\t")}`)}}function get_verbs(doc){if(doc.verbs()){arr=doc.verbs().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpVerbs").html(`${JSON.stringify(result,null,"\t")}`)}}function get_nouns(doc){if(doc.nouns()){arr=doc.nouns().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpNouns").html(`${JSON.stringify(result,null,"\t")}`)}}function get_adjectives(doc){if(doc.adjectives()){arr=doc.adjectives().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpAdjectives").html(`${JSON.stringify(result,null,"\t")}`)}}function get_values(doc){if(doc.values()){arr=doc.values().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpNumbers").html(`${JSON.stringify(result,null,"\t")}`)}}function get_dates(doc){if(doc.dates()){arr=doc.dates().out("array");for(var obj={},i=0,j=arr.length;i<j;i++)obj[arr[i]]?obj[arr[i]]++:obj[arr[i]]=1;const result=Object.entries(obj).sort((a,b)=>b[1]-a[1]).reduce((_sortedObj,[k,v])=>({..._sortedObj,[k]:v}),{});$("#nlpDates").html(`${JSON.stringify(result,null,"\t")}`)}}$(document).ready((function(){nerresults={},nlp.extend(compromiseNumbers),nlp.extend(compromiseDates),nlp.extend(compromiseAdjectives),nlp.extend(compromiseSentences),$("#button-analyze").on("click",(function(e){e.preventDefault(),$("#loader").attr("style","block"),$("#result").hide(),url="https://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&titles="+$("#input-url").val().replace("https://en.wikipedia.org/wiki/","").trim()+"&redirects=true=&origin=*",console.log(url),$.ajax({url:url,success:function(data){text=data.query.pages[Object.keys(data.query.pages)[0]].extract.toString(),$("#oextract").html(text),doc=nlp(text),get_places(doc,text),text=removeTags(text),doc=nlp(text),get_only_places(doc),get_only_people(doc),get_only_orgs(doc),get_verbs(doc),get_nouns(doc),get_adjectives(doc),get_values(doc),get_dates(doc),$("#loader").hide(),$("#result").attr("style","block"),$("#result").show()}})}))}));